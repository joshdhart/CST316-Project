(function(d){var u;d.fn.undoChanges=function(){u.undoChanges();return this};d.fn.updateChanges=function(){u.updateChanges();return this};d.fn.setLinkType=function(F){u.setLinkType(F);return this};d.fn.setOverlayDir=function(F){u.setOverlayDir(F);return this};d.fn.setEffect=function(F){u.setEffect(F);return this};d.fn.setCaptionAlign=function(F){u.setCaptionAlign(F);return this};d.fn.setCaptionPos=function(F){u.setCaptionPos(F);return this};d.fn.setCaptionEffect=function(F){u.setCaptionEffect(F);return this};d.fn.setDButtons=function(F){u.setDButtons(F);return this};d.fn.setTimerBar=function(F){u.setTimerBar(F);return this};d.fn.setNumInfo=function(F){u.setNumInfo(F);return this};d.fn.setIndex=function(F){u.setIndex(F);return this};d.fn.setIndexNumber=function(F){u.setIndexNumber(F);return this};d.fn.setPlayButton=function(F){u.setPlayButton(F);return this};d.fn.setMouseDButtons=function(F){u.setMouseDButtons(F);return this};d.fn.setMouseCaptions=function(F){u.setMouseCaptions(F);return this};d.fn.setMousePause=function(F){u.setMousePause(F);return this};d.fn.setGridSize=function(G,F){u.setGridSize(G,F);return this};d.fn.setNoCategory=function(F){u.setMultiCategory(F);return this};var s="top";var k="bottom";var p="left";var m="right";var o="outside";var g="inside";var i=0.85;var r="normal";var a=600;var n=8000;var t=10;var e=50;var f={none:0,fade:1,h_slide:2,v_slide:3};var v={none:0,fade:1,slide:2};var w="switch_index";var y="update_num";var h="update_index";var x="update_idx_list";var E="update_buttons";var q="update_menu_buttons";var c="update_pane_buttons";var B="update_tiles";var l="open_pane";var j="close_pane";var D="lightbox_open";function C(G,F){this.numCols=b(F.num_cols,4);this.numRows=b(F.num_rows,2);this.margin=A(F.margin,10);this.tileWidth=b(F.tile_width,225);this.tileHeight=b(F.tile_height,150);this.tileMargin=A(F.tile_margin,5);this.tileBorder=A(F.tile_border,1);this.autoScale=F.auto_scale;this.autoCenter=F.auto_center;this.rotate=F.auto_rotate;this.delay=b(F.delay,n);this.mouseoverPause=window.Touch?false:F.mouseover_pause;this.effect=F.effect.toLowerCase();this.duration=b(F.duration,a);this.easing=F.easing;this.displayOverlay=F.display_panel;this.overlayDir=F.panel_direction;this.displayTimer=F.display_timer;this.displayButtons=F.display_dbuttons;this.mouseoverButtons=F.mouseover_dbuttons;this.displayNumInfo=F.display_numinfo;this.displayIndex=F.display_index;this.displayNum=F.display_number;this.displayPlayBtn=F.display_play;this.displayCaption=F.display_caption;this.mouseoverCaption=window.Touch?false:F.mouseover_caption;this.captionEffect=F.caption_effect.toLowerCase();this.captionPos=F.caption_position.toLowerCase();this.captionAlign=F.caption_align.toLowerCase();this.textWidth=b(F.caption_width,0);this.textHeight=b(F.caption_height,0);this.contNav=F.cont_nav;this.shuffle=F.shuffle;this.catIndex=A(F.category_index,0);this.multiCategory=F.multi_category;this._$slider;this._$tilePanel;this._$mainBox;this._$tileBox;this._$prevBtn;this._$nextBtn;this._$cpanel;this._$lists;this._$currList;this._$tiles;this._$overlay;this._$contentFrame;this._$contentNum;this._$outerContent;this._$innerContent;this._$scrollbar;this._$thumb;this._$centerPanel;this._$indexPanel;this._$timer;this._$numInfo;this._$menuItems;this._$playBtn;this._$menuList;this._timerId;this._index;this._menuIndex;this._paneIndex;this._numDisplay;this._extX;this._extY;this._extWidth;this._extHeight;this._unitW;this._unitH;this._wPad;this._hPad;this._numPanes;this._frameHeight;this._slideCoord;this._$cloneDom;this.$object=G;this.init(G)}C.prototype.setLinkType=function(F){this.displayOverlay=(F=="panel")?true:false};C.prototype.setOverlayDir=function(F){this.overlayDir=F};C.prototype.setEffect=function(F){this.effect=F};C.prototype.setCaptionAlign=function(F){this.captionAlign=F};C.prototype.setCaptionPos=function(F){this.captionPos=F};C.prototype.setCaptionEffect=function(F){this.captionEffect=F};C.prototype.setDButtons=function(F){this.displayButtons=F};C.prototype.setTimerBar=function(F){this.displayTimer=F};C.prototype.setNumInfo=function(F){this.displayNumInfo=F};C.prototype.setIndex=function(F){this.displayIndex=F};C.prototype.setIndexNumber=function(F){this.displayNum=F};C.prototype.setPlayButton=function(F){this.displayPlayBtn=F};C.prototype.setMouseDButtons=function(F){this.mouseoverButtons=F};C.prototype.setMouseCaptions=function(F){this.mouseoverCaption=F};C.prototype.setMousePause=function(F){this.mouseoverPause=F};C.prototype.setGridSize=function(G,F){this.numCols=G;this.numRows=F};C.prototype.setMultiCategory=function(F){this.multiCategory=!F};C.prototype.undoChanges=function(){this.resetTimer();this.rotate=false;this.$object.empty();this.$object.append(this._$cloneDom);this.catIndex=0;this.textHeight=0};C.prototype.updateChanges=function(){this.init(this.$object)};C.prototype.init=function(H){this._$cloneDom=H.find(">div:first").clone();this._$slider=H.find(".g-slider");this._$tilePanel=this._$slider.find(">.tiles");this._$lists=this._$tilePanel.find(">ul");this._$tiles=this._$lists.find(">li");this._$tilePanel.wrap("<div class='main-box'><div class='tiles-box'></div></div>");this._$mainBox=this._$slider.find(">.main-box");$tileBox=this._$mainBox.find(">.tiles-box");if(!this.multiCategory){this.setNoCategory()}this._timerId=null;this._index=0;this._numDisplay=this.numCols*this.numRows;this._extY=this._extX=this._extHeight=this._extWidth=0;if(this.catIndex>this._$lists.size()-1){this.catIndex=0}this.initLists();this.initList(this.catIndex);this.initSlidePanel();this.initMenu();this.initCPanel();this.initOverlay();var G=this._$mainBox.height()+(this.displayTimer?this._$timer.height():0)+(this._$cpanel.is(":empty")?0:this._$cpanel.height());this._$slider.css({width:this._$mainBox.width(),height:G,paddingTop:this.margin,paddingLeft:this.margin,paddingRight:this.margin});this.changeCategory(this.catIndex);if(window.Touch){this._slideCoord={start:-1,end:-1};if(this.effect=="v_slide"){this._$tilePanel.bind("touchstart",{elem:this},this.touchVStart).bind("touchmove",{elem:this},this.touchVMove)}else{this._$tilePanel.bind("touchstart",{elem:this},this.touchStart).bind("touchmove",{elem:this},this.touchMove)}this._$tilePanel.bind("touchend",{elem:this},this.touchEnd)}else{try{this._$tilePanel.bind("mousewheel",{elem:this},this.mousewheelScroll);this._$slider.bind("mousewheel",this.preventDefault)}catch(F){}}if(this.mouseoverPause){this._$slider.bind("mouseenter",{elem:this},this.pause).bind("mouseleave",{elem:this},this.play)}d(document).bind(D,{elem:this},this.pause)};C.prototype.initLists=function(){this.initCaptions();this._$lists.css("opacity",0).data({init:false,index:0});for(var H=0;H<this._$lists.size();H++){var F=this._$lists.eq(H);var J=F.find(">li");var G=J.size();var I=Math.ceil(G/this._numDisplay);if(this.shuffle){J=this.shuffleItems(F)}F.data({items:J,numItems:G,numIndex:I,multi:I>1})}};C.prototype.initList=function(G){var F=this._$lists.eq(G);var L=F.find(">li");this.initItems(L);var K=F.data("numItems");this._unitW=L.outerWidth(true)*this.numCols;this._unitH=L.outerHeight(true)*this.numRows;for(var G=0;G<K;G+=this._numDisplay){F.append("<li class='sub'><ul class='sub'></ul></li>");var H=F.find(">li.sub:last-child");var I=H.find(">ul");H.css({width:this._unitW,height:this._unitH});I.css({width:this._unitW,height:this._unitH}).append(L.slice(G,G+this._numDisplay))}switch(f[this.effect]){case f.h_slide:F.css({width:F.data("numIndex")*this._unitW,height:this._unitH});break;case f.v_slide:F.css({width:this._unitW,height:F.data("numIndex")*this._unitH});break;default:F.css({width:this._unitW,height:this._unitH});var J=F.find(">li.sub");J.addClass("stack").not(":first").css("opacity",0);J.first().css("zIndex",1)}F.data("init",true)};C.prototype.initItems=function(J){for(var I=0;I<J.size();I++){var G=J.eq(I);var H;var F=G.find(">a:first");if(F.size()==0){if(this.displayOverlay&&G.find(">.content").size()>0){G.data("type","static").css("cursor","pointer").bind("click",{elem:this,i:I},this.openOverlay)}else{G.click(this.preventDefault)}H=G.find(">img")}else{if(this.displayOverlay){if(G.find(">.content").size()>0){G.data("type","static")}else{G.data({type:F.attr("rel"),url:F.attr("href")})}G.css("cursor","pointer").bind("click",{elem:this,i:I},this.openOverlay)}H=F.find(">img")}if(H.size()>0){H.addClass("thumbnail");H[0].complete||H[0].readyState=="complete"?this.processImg(H):H.bind("load",{elem:this},this.processLoadedImg)}if(this.displayCaption&&this.captionPos==g){this.initCaption(G)}G.data({index:I,image:H})}J.css({width:this.tileWidth+this._extWidth,height:this.tileHeight+this._extHeight,marginRight:this.tileMargin,marginBottom:this.tileMargin,borderWidth:this.tileBorder}).hover(this.itemMouseover,this.itemMouseout)};C.prototype.initSlidePanel=function(){this._$tilePanel.css({width:this._unitW-this.tileMargin,height:this._unitH-this.tileMargin});this._$mainBox.width(this._$tilePanel.width())};C.prototype.initCaptions=function(){var F=this._$tiles.find(">div:not('.content'):first");if(this.displayCaption){F.addClass("caption");this._wPad=F.outerWidth()-F.width();this._hPad=F.outerHeight()-F.height();if(this.captionPos==o){switch(this.captionAlign){case p:F.height(this.tileHeight-this._hPad);this.textWidth=this.getTextWidth();F.css({width:this.textWidth,left:0});this._extX=this._extWidth=F.outerWidth();break;case m:F.height(this.tileHeight-this._hPad);this.textWidth=this.getTextWidth();F.css({width:this.textWidth,left:this.tileWidth});this._extWidth=F.outerWidth();break;case s:F.width(this.tileWidth-this._wPad);this.textHeight=this.getTextHeight();F.css({height:this.textHeight-this._hPad,top:0});this._extY=this._extHeight=F.outerHeight();break;default:F.width(this.tileWidth-this._wPad);this.textHeight=this.getTextHeight();F.css({height:this.textHeight-this._hPad,top:this.tileHeight});this._extHeight=F.outerHeight()}F.addClass("outside")}}else{F.hide()}};C.prototype.initCaption=function(F){var G=F.find(">div:not('.content'):first");if(G.size()==0||G.html()==""){G.remove();return}if(this.captionAlign==p||this.captionAlign==m){G.height(this.tileHeight-this._hPad).width(G.outerWidth()-this._wPad);if(this.textWidth>0){G.width(Math.min(this.textWidth-this._wPad,this.tileWidth-this._wPad))}G.css("left",this.captionAlign==p?0:this.tileWidth-G.outerWidth())}else{G.width(this.tileWidth-this._wPad);if(this.textHeight>0){G.height(Math.min(this.textHeight-this._hPad,this.tileHeight-this._hPad))}G.css("top",this.captionAlign==s?0:this.tileHeight-G.outerHeight())}if(this.mouseoverCaption){F.data("caption",G);switch(v[this.captionEffect]){case v.slide:if(this.captionAlign==p){F.data({textPos:0,textOff:-G.outerWidth()});G.css("left",F.data("textOff"));F.hover(this.slideInHText,this.slideOutHText)}else{if(this.captionAlign==m){F.data({textPos:this.tileWidth-G.outerWidth(),textOff:this.tileWidth});G.css("left",F.data("textOff"));F.hover(this.slideInHText,this.slideOutHText)}else{if(this.captionAlign==s){F.data({textPos:0,textOff:-G.outerHeight()});G.css("top",F.data("textOff"));F.hover(this.slideInVText,this.slideOutVText)}else{F.data({textPos:this.tileHeight-G.outerHeight(),textOff:this.tileHeight});G.css("top",F.data("textOff"));F.hover(this.slideInVText,this.slideOutVText)}}}break;case v.fade:if(!(jQuery.browser.msie&&parseInt(jQuery.browser.version)<9)){G.css("opacity",0);F.hover(this.fadeInText,this.fadeOutText);break}default:G.css("visibility","hidden");F.hover(this.showText,this.hideText)}}};C.prototype.getTextWidth=function(){if(this.textWidth==0){var F=this._$tiles.find(">div:not('.content'):first").map(function(){return d(this).outerWidth()}).get();this.textWidth=Math.max.apply(Math,F)}return this.textWidth};C.prototype.getTextHeight=function(){if(this.textHeight==0){var F=this._$tiles.find(">div:not('.content'):first").map(function(){return d(this).outerHeight()}).get();this.textHeight=Math.max.apply(Math,F)}return this.textHeight};C.prototype.showText=function(){d(this).data("caption").css("visibility","visible")};C.prototype.hideText=function(){d(this).data("caption").css("visibility","hidden")};C.prototype.fadeInText=function(){d(this).data("caption").stop(true).animate({opacity:1},"fast")};C.prototype.fadeOutText=function(){d(this).data("caption").stop(true).animate({opacity:0},"fast")};C.prototype.slideInVText=function(){d(this).data("caption").stop(true).animate({top:d(this).data("textPos")},"fast")};C.prototype.slideOutVText=function(){d(this).data("caption").stop(true).animate({top:d(this).data("textOff")},"fast")};C.prototype.slideInHText=function(){d(this).data("caption").stop(true).animate({left:d(this).data("textPos")},"fast")};C.prototype.slideOutHText=function(){d(this).data("caption").stop(true).animate({left:d(this).data("textOff")},"fast")};C.prototype.initMenu=function(G){if(this._$lists.size()>1){var N=this;var P="<div class='menu-bar'>								<div class='menu-panel'>									<ul class='menu'>";this._$lists.each(function(){P+="<li>"+d(this).attr("title")+"</li>"});P+="</ul>								</div>							</div>";$tileBox.prepend(P);var I=$tileBox.find(">.menu-bar");var F=I.find(">.menu-panel");I.width(this._$tilePanel.width()-(I.outerWidth()-I.width()));F.width(I.width());this._$menuList=F.find(">ul.menu");this._$menuItems=this._$menuList.find(">li");this._$menuItems.click(function(){var W=d(this).index();if(W!=N._$menuItems.filter(".selected").index()){N.changeCategory(W)}});var J=this._$menuItems.map(function(){return d(this).outerWidth()}).get();var O=Math.max.apply(Math,J);var M=Math.round(F.width()/this._$menuItems.size());var S=this._$menuItems.outerWidth()-this._$menuItems.width();if(M<O){I.append("<div class='menu-buttons'>									<div class='menu-back'></div>									<div class='menu-fwd'></div>								 </div>");var L=I.find(">.menu-buttons");var H=L.find(">.menu-back");var V=L.find(">.menu-fwd");F.width(F.width()-L.outerWidth());var R=Math.floor(F.width()/O);if(R>0){var T=Math.round((1/R)*100)/100;this._$menuItems.width(Math.floor(T*F.width())-S)}else{this._$menuItems.css({paddingLeft:0,paddingRight:0});S=this._$menuItems.outerWidth()-this._$menuItems.width();this._$menuItems.width(F.width()-S);R=1}this._$menuList.width(this._$menuItems.size()*this._$menuItems.outerWidth());F.width(R*this._$menuItems.outerWidth());this._menuIndex=0;maxMenuIndex=this._$menuItems.size()-R;this._$slider.bind(q,function(){H.toggleClass("off",N._menuIndex==0);V.toggleClass("off",N._menuIndex==maxMenuIndex)});H.bind("click",{elem:this},this.menuBack);V.bind("click",{elem:this},this.menuFwd);if(window.Touch){var U={start:-1,end:-1};F.bind("touchstart",function(W){U.start=W.originalEvent.touches[0].pageX}).bind("touchmove",function(W){W.preventDefault();U.end=W.originalEvent.touches[0].pageX}).bind("touchend",function(){if(U.end>=0){if(Math.abs(U.start-U.end)>e){if(U.end<U.start){N.menuFwd()}else{N.menuBack()}}}U.start=U.end=-1})}else{try{I.bind("mousewheel",function(W){if(!N._$menuList.is(":animated")){W.originalEvent.wheelDelta>0?N.menuBack():N.menuFwd()}})}catch(Q){}}this._$slider.trigger(q)}else{var R=this._$menuItems.size();var T=Math.round((1/R)*100)/100;this._$menuItems.width(Math.floor(T*F.width())-S);var K=this._$menuItems.last();K.css("border","none").width(F.width()-((R-1)*this._$menuItems.outerWidth())-(K.outerWidth()-K.width()));this._$menuList.width(F.width())}}this._$lists.removeAttr("title")};C.prototype.menuBack=function(G){var F=(typeof G!="undefined")?G.data.elem:this;if(F._menuIndex>0){F._menuIndex--;F._$menuList.stop(true).animate({left:-F._$menuItems.eq(F._menuIndex).position().left},r);F._$slider.trigger(q)}};C.prototype.menuFwd=function(G){var F=(typeof G!="undefined")?G.data.elem:this;if(F._menuIndex<maxMenuIndex){F._menuIndex++;F._$menuList.stop(true).animate({left:-F._$menuItems.eq(F._menuIndex).position().left},r);F._$slider.trigger(q)}};C.prototype.initCPanel=function(){var F="<div class='timer-box'>							<div class='timer'></div>						</div>						<div class='cpanel'><div class='num-info'></div><div class='center-panel'><div class='index-panel'></div></div><div class='play-btn'></div></div>";this._$slider.append(F);this._$cpanel=this._$slider.find(">.cpanel");this._$centerPanel=this._$cpanel.find(">.center-panel");this._$indexPanel=this._$centerPanel.find(">.index-panel");this.initTimer();this.initDButtons();this.initNumInfo();this.initPlay();if(this.displayIndex){this._$indexPanel.data({maxWidth:this._$tilePanel.width()-((2*Math.max(this._$numInfo.width(),this._$playBtn.width()))+this._$centerPanel.find(">.s-prev").width()+this._$centerPanel.find(">.s-next").width()),scroll:false});this.initIndexes();if(this._$indexPanel.find(">ul.indexes").size()>0){this.initIndexScroll();this._$slider.bind(w,{elem:this},this.switchIndex)}else{this._$indexPanel.remove()}}else{this._$indexPanel.remove()}this._$slider.css("paddingBottom",0);if(this._$centerPanel.is(":empty")){this._$centerPanel.remove();if(!this.displayPlayBtn&&!this.displayNumInfo){this._$cpanel.remove();this._$slider.css("paddingBottom",this.margin)}}};C.prototype.initTimer=function(){var F=this._$slider.find(">.timer-box");this._$timer=F.find(">.timer");this._$timer.data("pct",1);if(!this.displayTimer){F.hide()}};C.prototype.initDButtons=function(){if(this.displayButtons){var F=this;if(this.mouseoverButtons){this._$slider.append("<div class='prev-btn'>&laquo;</div><div class='next-btn'>&raquo;</div>");this._$prevBtn=this._$slider.find(">.prev-btn");this._$nextBtn=this._$slider.find(">.next-btn");if(window.Touch){this._$prevBtn.css("left",0);this._$nextBtn.css("marginLeft",-this._$nextBtn.width())}else{this._$prevBtn.css("left",-(this._$prevBtn.width()+1));this._$nextBtn.css("marginLeft",1);this._$slider.hover(function(){F._$prevBtn.stop(true).animate({left:0},r);F._$nextBtn.stop(true).animate({marginLeft:-F._$nextBtn.width()},r)},function(){F._$prevBtn.stop(true).animate({left:-(F._$prevBtn.width()+1)},r);F._$nextBtn.stop(true).animate({marginLeft:1},r)})}}else{this._$prevBtn=d("<div class='s-prev'>&laquo;</div>");this._$nextBtn=d("<div class='s-next'>&raquo;</div>");this._$centerPanel.prepend(this._$prevBtn);this._$centerPanel.append(this._$nextBtn)}this._$prevBtn.bind("click",{elem:this},this.goBack).mousedown(this.preventDefault);this._$nextBtn.bind("click",{elem:this},this.goFwd).mousedown(this.preventDefault);if(!this.contNav){this._$slider.bind(E,function(){F._$prevBtn.toggleClass("off",F._index==0);F._$nextBtn.toggleClass("off",F._index==F._$currList.data("numIndex")-1)})}}};C.prototype.initNumInfo=function(){this._$numInfo=this._$cpanel.find(">.num-info");if(this.displayNumInfo){var F=this;this.setNumInfoSize();this._$slider.bind(y,function(){var J="";var I=F._$currList.data("numItems");if(I>0){var H=F._index*F._numDisplay;var G=Math.min(H+F._numDisplay,I);J=(H+1)+"-"+G+" of "+I}F._$numInfo.html(J)})}else{this._$numInfo.remove()}};C.prototype.setNumInfoSize=function(){var F=this._$lists.map(function(){return d(this).data("numItems")}).get();var H=z(Math.max.apply(Math,F));var I="";for(var G=0;G<H;G++){I+="0"}I+=("-"+I+" of "+I);this._$numInfo.html(I).width(this._$numInfo.width()).html("")};C.prototype.initPlay=function(){this._$playBtn=this._$cpanel.find(">.play-btn");if(this.displayPlayBtn){var F=this;this._$playBtn.toggleClass("pause",this.rotate).click(function(){F.rotate=!F.rotate;if(F.rotate){F._$playBtn.addClass("pause");F.startTimer()}else{F._$playBtn.removeClass("pause");F.pauseTimer()}return false})}else{this._$playBtn.remove()}};C.prototype.pause=function(G){var F=G.data.elem;F.rotate=false;F._$playBtn.removeClass("pause");F.pauseTimer()};C.prototype.play=function(G){var F=G.data.elem;F.rotate=true;F._$playBtn.addClass("pause");F.startTimer()};C.prototype.initIndexes=function(){for(var M=0;M<this._$lists.size();M++){var N=this._$lists.eq(M);var G=N.data("numIndex");if(G>1){var P="<ul class='indexes'>";for(var L=0;L<G;L++){var Q=L*this._numDisplay;var K=Math.min(Q+this._numDisplay,N.data("numItems"));P+="<li title='"+((Q+1)+"-"+K)+"'>"+(L+1)+"</li>"}P+="</ul>";this._$indexPanel.append(P);var I=this._$indexPanel.find(">ul:last");var H=I.find(">li");if(this.displayNum){H.addClass("num").last().css("border","none")}else{H.empty()}var O=this;H.click(function(){O.resetTimer();O._index=d(this).index();O._$slider.trigger(B);return false}).mousedown(this.preventDefault);var J=H.outerWidth(true);I.width(H.size()*J);if(I.width()>this._$indexPanel.data("maxWidth")){var F=Math.floor(this._$indexPanel.data("maxWidth")/J)*J;I.data({width:F,range:F-I.width()});this._$indexPanel.data("scroll",true)}else{I.data({width:I.width(),range:0})}N.data("indexList",I);I.hide()}}};C.prototype.initIndexScroll=function(){this._$indexPanel.append("<div class='index-back'></div><div class='index-fwd'></div>");var F=this._$indexPanel.find(">.index-back");var H=this._$indexPanel.find(">.index-fwd");if(this._$indexPanel.data("scroll")){var G=this;if(!window.Touch){F.hover(function(){H.show();var J=G._$currList.data("indexList");var I=-J.stop(true).position().left*t;J.stop(true).animate({left:0},I,"linear",function(){F.hide()})},function(){G._$currList.data("indexList").stop(true)});H.hover(function(){F.show();var K=G._$currList.data("indexList");var I=K.data("range");var J=(-I+K.stop(true).position().left)*t;K.stop(true).animate({left:I},J,"linear",function(){H.hide()})},function(){G._$currList.data("indexList").stop(true)})}this._$slider.bind(x,function(){var L=G._$currList.data("indexList");if(!L.is(":animated")){var J=L.find(">li").outerWidth(true);var I=L.data("range");var K=L.stop(true).position().left+(G._index*J);if(K<0||K>G._$indexPanel.width()-J){L.stop(true).animate({left:Math.max(-G._index*J,I)},r,function(){d(this).position().left==0?F.hide():F.show();d(this).position().left==I?H.hide():H.show()})}}})}};C.prototype.switchIndex=function(G){var F=G.data.elem;F._$slider.unbind(h);F._$indexPanel.find(">ul.indexes:visible").hide();if(F._$currList.data("multi")){var H=F._$currList.data("indexList");F._$indexPanel.width(H.data("width"));H.show();if(H.data("range")<0){F._$indexPanel.find(".index-back, .index-fwd").show()}else{F._$indexPanel.find(".index-back, .index-fwd").hide()}F._$slider.bind(h,function(){var I=H.find(">li");I.filter(".hl").removeClass("hl");I.eq(F._index).addClass("hl")})}};C.prototype.switchCtrls=function(){this._$slider.unbind(B);this._$slider.trigger(w);if(this._$currList.data("multi")){this._$centerPanel.show();this._$playBtn.show();if(this.displayButtons){this._$prevBtn.show();this._$nextBtn.show()}this._$centerPanel.width(this._$indexPanel.width()+this._$centerPanel.find(">.s-prev").width()+this._$centerPanel.find(">.s-next").width()).css("marginLeft",-this._$centerPanel.width()/2);switch(f[this.effect]){case f.h_slide:this._$slider.bind(B,{elem:this},this.scrollHTiles);break;case f.v_slide:this._$slider.bind(B,{elem:this},this.scrollVTiles);break;case f.fade:this._$slider.bind(B,{elem:this},this.fadeTiles);break;default:this._$slider.bind(B,{elem:this},this.showTiles)}}else{this._$centerPanel.hide();this._$playBtn.hide();if(this.displayButtons){this._$prevBtn.hide();this._$nextBtn.hide()}}};C.prototype.updateCtrls=function(){this._$slider.trigger(E).trigger(y).trigger(h).trigger(x)};C.prototype.initOverlay=function(){if(this.displayOverlay){var N=this;var O="<div class='content-overlay'>								<div class='content-bar'>									<div class='content-prev'>&laquo;</div>									<div class='content-num'></div>									<div class='content-next'>&raquo;</div>									<div class='content-close'></div>								</div>								<div class='content-frame'>									<div class='outer-content'>										<div class='inner-content'></div>									</div>									<div class='scrollbar'>										<div class='thumb'></div>									</div>								</div>							</div>";this._$mainBox.height($tileBox.height());var M=this._$mainBox.width();var Q=this._$mainBox.height();$tileBox.css({width:M,height:Q}).append("<div class='inner-cover'></div>").wrap("<div class='content-strip'></div>");var G=this._$mainBox.find(">.content-strip");switch(this.overlayDir){case p:G.css({width:2*M,height:Q,left:-M}).prepend(O);this.bindPaneMove("left",0,-M);break;case m:G.css({width:2*M,height:Q}).append(O);this.bindPaneMove("left",-M,0);break;case s:G.css({width:M,height:2*Q,top:-Q}).prepend(O);this.bindPaneMove("top",0,-Q);break;default:G.css({width:M,height:2*Q}).append(O);this.bindPaneMove("top",-Q,0)}this._$overlay=G.find(">.content-overlay").css({width:M,height:Q});var H=this._$overlay.find(">.content-bar").bind("click",{elem:this},this.closeOverlay);var K=H.find(">.content-prev").bind("click",{elem:this},this.prevPane).mousedown(this.preventDefault);var I=H.find(">.content-next").bind("click",{elem:this},this.nextPane).mousedown(this.preventDefault);var J=H.find(">.content-close").bind("click",{elem:this},this.closeOverlay);this._$contentNum=H.find(">.content-num").click(this.preventDefault);if(!this.contNav){this._$slider.bind(c,function(){K.toggleClass("off",N._paneIndex==0);I.toggleClass("off",N._paneIndex==N._$currList.data("numItems")-1)})}this._$contentFrame=this._$overlay.find(">.content-frame");this._$outerContent=this._$contentFrame.find(">.outer-content");this._$innerContent=this._$outerContent.find(">.inner-content");this._$scrollbar=this._$contentFrame.find(">.scrollbar");this._$thumb=this._$scrollbar.find(">.thumb");this._frameHeight=this._$overlay.height()-(this._$contentFrame.outerHeight()-this._$contentFrame.height())-H.outerHeight();this._$contentFrame.css({width:this._$overlay.width()-(this._$contentFrame.outerWidth()-this._$contentFrame.width()),height:this._frameHeight});this._$thumb.click(this.preventDefault);try{this._$thumb.draggable({containment:"parent"}).bind("drag",function(){N._$innerContent.css({top:Math.round(-N._$thumb.position().top*N._$scrollbar.data("ratio"))})})}catch(P){}this._$scrollbar.click(function(T){var S=Math.round(((T.pageY-N._$scrollbar.offset().top)/N._$scrollbar.height())*100)/100;var U=-S*N._$scrollbar.data("range");N._$innerContent.stop(true).animate({top:U},r);N._$thumb.stop(true).animate({top:-U/N._$scrollbar.data("ratio")},r);return false});if(window.Touch){var L={start:0,end:0};var F;this._$outerContent.bind("touchstart",function(S){if(!N._$innerContent.is(":animated")){L.start=S.originalEvent.touches[0].pageY;F=N._$innerContent.position().top}}).bind("touchmove",function(U){U.preventDefault();var V=L.start-U.originalEvent.touches[0].pageY;var T=F-V;var S=-N._$scrollbar.data("range");if(T>0){T=0}else{if(T<S){T=S}}N._$innerContent.css("top",T);N._$thumb.css("top",-T/N._$scrollbar.data("ratio"))}).bind("touchend",function(){L.start=L.end=0})}else{try{var R=Math.round(this._frameHeight/2);this._$contentFrame.bind("mousewheel",function(T){var S=-N._$scrollbar.data("range");if(S<0){if(!N._$innerContent.is(":animated")){N._$innerContent.stop(true);var U;if(T.originalEvent.wheelDelta>0){U=Math.min(0,N._$innerContent.position().top+R)}else{U=Math.max(S,N._$innerContent.position().top-R)}N._$innerContent.animate({top:U},r);N._$thumb.stop(true).animate({top:-U/N._$scrollbar.data("ratio")},r)}}return false})}catch(P){}}}};C.prototype.bindPaneMove=function(J,I,H){var K=$tileBox.find(">.inner-cover").css("opacity",0).click(this.preventDefault);var G=this._$mainBox.find(">.content-strip");var M=this;var L={};L[J]=I;var F={};F[J]=H;this._$slider.bind(l,function(){K.show().stop(true).animate({opacity:1},r);G.stop(true,true).animate(L,r,M.easing)}).bind(j,function(){K.stop(true).animate({opacity:0},r);G.stop(true,true).animate(F,r,M.easing,function(){K.hide()})})};C.prototype.openOverlay=function(G){var F=G.data.elem;F.pauseTimer();F._paneIndex=G.data.i;F._numPanes=F._$currList.data("numItems");F.gotoPane(F._paneIndex);F._$slider.trigger(l);F._$cpanel.stop(true,true).fadeOut(r);F._$prevBtn.css("visibility","hidden");F._$nextBtn.css("visibility","hidden");return false};C.prototype.closeOverlay=function(G){var F=G.data.elem;F.startTimer();F._$slider.trigger(j);F._$innerContent.stop(true).animate({opacity:0},r);F._$cpanel.stop(true,true).fadeIn(r);F._$prevBtn.css("visibility","visible");F._$nextBtn.css("visibility","visible");return false};C.prototype.gotoPane=function(H){this._$thumb.stop(true).css("top",0);this._$innerContent.stop(true).css({opacity:0,top:0});this._$contentNum.html((H+1)+"/"+this._numPanes);var G=this._$currList.data("items").eq(H);this.getContent(G);var I=this._$innerContent.height();if(I>this._frameHeight){this._$outerContent.width(this._$contentFrame.width()-this._$scrollbar.outerWidth(true));this._$scrollbar.show();this._$thumb.css({height:Math.round((this._frameHeight/I)*this._$scrollbar.height())});var F=I-this._frameHeight;this._$scrollbar.data({ratio:F/(this._$scrollbar.height()-this._$thumb.height()),range:F})}else{this._$scrollbar.hide();this._$outerContent.width(this._$contentFrame.width());this._$scrollbar.data("range",0)}this._$slider.trigger(c)};C.prototype.prevPane=function(G){var F=G.data.elem;if(F._paneIndex>0){F._paneIndex--}else{if(F.contNav){F._paneIndex=F._numPanes-1}else{return false}}F.gotoPane(F._paneIndex);return false};C.prototype.nextPane=function(G){var F=G.data.elem;if(F._paneIndex<F._numPanes-1){F._paneIndex++}else{if(F.contNav){F._paneIndex=0}else{return false}}F.gotoPane(F._paneIndex);return false};C.prototype.getContent=function(F){var H=F.data("type");var G=F.data("url");var I=this;if(typeof H!="undefined"){H=H.toLowerCase()}this._$outerContent.removeClass("loading");if(H=="static"){this._$innerContent.html(F.find(">.content").html()).animate({opacity:1},r)}else{if(H=="inline"){this._$innerContent.html(d(G).html()).animate({opacity:1},r)}else{if(H=="ajax"){this._$outerContent.addClass("loading");d.ajax({url:G,success:function(K){I._$innerContent.html(K).animate({opacity:1},r);I._$outerContent.removeClass("loading")},error:function(){}})}else{if(H=="iframe"){this._$outerContent.addClass("loading");var J=d("<iframe frameborder='0' hspace='0' scrolling='auto'></iframe>");J.css({height:this._$contentFrame.height()});this._$innerContent.html(J).animate({opacity:1},r);J.load(function(){I._$outerContent.removeClass("loading")}).attr("src",G)}else{this._$outerContent.addClass("loading");this._$innerContent.html("").animate({opacity:1},r)}}}}};C.prototype.changeCategory=function(G){this.resetTimer();if(G!=this.catIndex){this._$lists.eq(this.catIndex).stop(true,true).data("index",this._index).css("zIndex",0)}this.catIndex=G;try{this._$menuItems.filter(".selected").removeClass("selected");this._$menuItems.eq(this.catIndex).addClass("selected")}catch(F){}this._$currList=this._$lists.eq(this.catIndex);if(!this._$currList.data("init")){this.initList(this._$currList.index())}this._index=this._$currList.data("index");if(this.effect=="none"){this._$lists.not(":eq("+this._$currList.index()+")").css("opacity",0);this._$currList.css("zIndex",1).css("opacity",1)}else{var H=this;this._$currList.css("zIndex",1).stop(true,true).animate({opacity:1},r,function(){H._$lists.not(":eq("+d(this).index()+")").css("opacity",0)})}this.switchCtrls();this.updateCtrls();this.startTimer()};C.prototype.goBack=function(G){var F=(typeof G!="undefined")?G.data.elem:this;if(F._index>0){F._index--}else{if(F.contNav){F._index=F._$currList.data("numIndex")-1}else{return}}F.resetTimer();F._$slider.trigger(B)};C.prototype.goFwd=function(G){var F=(typeof G!="undefined")?G.data.elem:this;if(F._index<F._$currList.data("numIndex")-1){F._index++}else{if(F.contNav){F._index=0}else{return}}F.resetTimer();F._$slider.trigger(B)};C.prototype.showTiles=function(G){var F=G.data.elem;var H=F._$currList.find(">li.sub");H.css({opacity:0,zIndex:0});H.eq(F._index).css({opacity:1,zIndex:1});F.startTimer();F.updateCtrls()};C.prototype.fadeTiles=function(G){var F=G.data.elem;var H=F._$currList.find(">li.sub");H.css("zIndex",0).stop(true,true);H.eq(F._index).css({opacity:0,zIndex:1,visibility:"visible"}).stop(true,true).animate({opacity:1},F.duration,F.easing,function(){H.not(":eq("+d(this).index()+")").css("visibility","hidden");F.startTimer()});F.updateCtrls()};C.prototype.scrollHTiles=function(G){var F=G.data.elem;F._$currList.stop(true,true).animate({left:-F._index*F._unitW},F.duration,F.easing,function(){F.startTimer()});F.updateCtrls()};C.prototype.scrollVTiles=function(G){var F=G.data.elem;F._$currList.stop(true,true).animate({top:-F._index*F._unitH},F.duration,F.easing,function(){F.startTimer()});F.updateCtrls()};C.prototype.processLoadedImg=function(G){var F=G.data.elem;F.processImg(d(this))};C.prototype.processImg=function(F){if(this.autoScale){var G=F.height()/F.width();F.css({width:this.tileWidth,height:G*this.tileWidth});if(F.height()>this.tileHeight){G=F.width()/F.height();F.css({width:G*this.tileHeight,height:this.tileHeight})}}if(this.autoCenter){F.css({left:this._extX+Math.round((this.tileWidth-F.width())/2),top:this._extY+Math.round((this.tileHeight-F.height())/2)})}else{F.css({left:this._extX,top:this._extY})}};C.prototype.itemMouseover=function(){d(this).data("image").stop(true).animate({opacity:i},r)};C.prototype.itemMouseout=function(){d(this).data("image").stop(true).animate({opacity:1},r,function(){if(jQuery.browser.msie){this.style.removeAttribute("filter")}})};C.prototype.startTimer=function(){if(this.rotate&&this._timerId==null&&this._$currList.data("multi")){var F=this;var G=Math.round(this._$timer.data("pct")*this.delay);this._$timer.stop(true).animate({width:0},G,"linear");this._timerId=setTimeout(function(){F.resetTimer();F._index=F._index<F._$currList.data("numIndex")-1?F._index+1:0;F._$slider.trigger(B)},G)}};C.prototype.pauseTimer=function(){clearTimeout(this._timerId);this._timerId=null;this._$timer.stop(true).data("pct",this._$timer.width()/this._$cpanel.width())};C.prototype.resetTimer=function(){clearTimeout(this._timerId);this._timerId=null;this._$timer.stop(true).width("100%").data("pct",1)};C.prototype.shuffleItems=function(I){var L=I.find(">li");var K=L.size();var H=new Array(K);for(var J=0;J<K;J++){var F=Math.floor(Math.random()*K);var G=L.eq(J);H[J]=L.eq(F);H[F]=G}for(var J=0;J<K;J++){I.append(H[J])}return I.find(">li")};C.prototype.setNoCategory=function(){var G=this._$lists.eq(0);for(var H=1;H<this._$lists.size();H++){var F=this._$lists.eq(H);G.append(F.find(">li"));F.remove()}this._$lists=this._$tilePanel.find(">ul");this._$tiles=this._$lists.find(">li")};C.prototype.preventDefault=function(){return false};C.prototype.mousewheelScroll=function(G){var F=G.data.elem;if(!F._$currList.is(":animated")){G.originalEvent.wheelDelta>0?F.goBack():F.goFwd()}return false};C.prototype.touchStart=function(F){F.data.elem._slideCoord.start=F.originalEvent.touches[0].pageX};C.prototype.touchMove=function(F){F.preventDefault();F.data.elem._slideCoord.end=F.originalEvent.touches[0].pageX};C.prototype.touchVStart=function(F){F.data.elem._slideCoord.start=F.originalEvent.touches[0].pageY};C.prototype.touchVMove=function(F){F.preventDefault();F.data.elem._slideCoord.end=F.originalEvent.touches[0].pageY};C.prototype.touchEnd=function(G){var F=G.data.elem;if(F._slideCoord.end>=0){if(Math.abs(F._slideCoord.start-F._slideCoord.end)>e){if(F._slideCoord.end<F._slideCoord.start){F.swipeFwd()}else{F.swipeBack()}}}F._slideCoord.start=F._slideCoord.end=-1};C.prototype.swipeBack=function(){if(this._index>0){this._index--;this.resetTimer();this._$slider.trigger(B)}};C.prototype.swipeFwd=function(){if(this._index<this._$currList.data("numIndex")-1){this._index++;this.resetTimer();this._$slider.trigger(B)}};function b(F,G){if(!isNaN(F)&&F>0){return F}return G}function A(F,G){if(!isNaN(F)&&F>=0){return F}return G}function z(F){var G=1;F=Math.abs(F);F=parseInt(F/10);while(F>0){G++;F=parseInt(F/10)}return G}d.fn.gridSlider=function(H){var G={num_cols:4,num_rows:2,tile_width:225,tile_height:150,tile_margin:6,tile_border:1,margin:10,auto_scale:true,auto_center:true,auto_rotate:false,delay:n,mouseover_pause:false,effect:"h_slide",duration:a,easing:"",display_panel:true,panel_direction:k,display_timer:true,display_dbuttons:true,mouseover_dbuttons:true,display_numinfo:true,display_index:true,display_number:true,display_play:true,display_caption:true,mouseover_caption:true,caption_effect:"fade",caption_align:k,caption_position:g,caption_width:0,caption_height:0,cont_nav:true,shuffle:false,category_index:0,multi_category:true};var F=d.extend(true,{},G,H);return this.each(function(){u=new C(d(this),F)})}})(jQuery);